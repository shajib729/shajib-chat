(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{255:function(e,t,n){},259:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){},271:function(e,t,n){},426:function(e,t,n){},457:function(e,t,n){},458:function(e,t,n){},460:function(e,t,n){"use strict";n.r(t);var a,s=n(0),c=n.n(s),r=n(13),i=n.n(r),o=(n(255),n(27)),l=n(20),u=n(9),d=(n(259),n(7)),j=n.n(d),p=n(15),b=n(12),m=(n(261),n(262),n(494)),O=n(493),h=n(489),f=n(1),x=function(e){var t=e.conversation,n=Object(u.c)((function(e){return e.AuthReducer})),a=n.user,c=(n.conversationUser,n.newUserData,Object(l.f)()),r=Object(l.h)().id,i=t.members.find((function(e){return e!==a._id})),o=Object(s.useState)([]),d=Object(b.a)(o,2),x=d[0],v=d[1],g=function(){var e=Object(p.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/user/".concat(i),{method:"get"});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,v(n.message),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/delete/friendconversation/".concat(t._id),{method:"DELETE",headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:e.sent,200===n.status&&c.push("/");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){g()}),[r]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:"leftChatUser",children:x.username?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(f.jsx)("img",{className:"profileImage",src:null===x||void 0===x?void 0:x.profilePicture,alt:""}),Object(f.jsx)("div",{className:"profileName",children:null===x||void 0===x?void 0:x.username})]}),Object(f.jsx)(h.a,{children:Object(f.jsx)(O.a,{onClick:function(){return y(x)}})})]}):Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center",margin:"0px"},children:[Object(f.jsx)(m.a,{variant:"circle",width:40,height:40,style:{background:"rgb(0 0 0 / 20%)"}}),Object(f.jsx)(m.a,{variant:"text",width:100,height:30,style:{background:"rgb(0 0 0 / 20%)",marginLeft:"20px"}})]})})})},v=function(e){var t=e.currentConversation,n=Object(u.c)((function(e){return e.AuthReducer})).user,a=Object(u.b)(),c=Object(s.useState)(),r=Object(b.a)(c,2),i=r[0],l=r[1],d=function(){var e=Object(p.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/conversation/".concat(n._id),{method:"get"});case 2:return t=e.sent,e.next=5,t.json();case 5:s=e.sent,l(s.message),a({type:"ADD_CONVERSATIONS_USER",payload:s.message});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){d()}),[t]),Object(f.jsxs)("section",{className:t?"leftContainer":"leftContainer mobileLeftActive",children:[Object(f.jsx)("div",{className:"leftHeader",children:Object(f.jsx)("div",{className:"leftHeaderTitle",children:"Chat"})}),Object(f.jsx)("div",{className:"leftChatUsers",children:i?i.length>=1?i.map((function(e){return Object(f.jsx)(o.c,{onClick:function(){return setTimeout((function(){a({type:"SCROLL_BOTTOM"})}),500)},activeClassName:"active",to:"/message/".concat(e._id),children:Object(f.jsx)(x,{conversation:e})})})):Object(f.jsx)("h2",{style:{textAlign:"center",color:"gray",userSelect:"none"},children:"No user found! Search Your Friends...\ud83e\udd37\u200d\u2640\ufe0f"}):Object(f.jsx)("h1",{children:"Loading..."})})]})},g=(n(265),n(497)),y=n(498),N=(n(266),function(e){var t=e.searchInput,n=e.setSearchInput,a=Object(u.c)((function(e){return e.AuthReducer})),c=a.user,r=a.conversationUser,i=Object(l.f)(),o=Object(s.useState)([]),d=Object(b.a)(o,2),m=d[0],O=d[1],h=function(){var e=Object(p.a)(j.a.mark((function e(t){var a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(""),!r.some((function(e){return e.members.some((function(e){return e===t._id}))}))){e.next=5;break}i.push("/message/".concat(r.find((function(e){return e.members.some((function(e){return e===t._id}))}))._id)),e.next=12;break;case 5:return e.next=7,fetch("/api/conversation",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderId:t._id})});case 7:return a=e.sent,e.next=10,a.json();case 10:s=e.sent,i.push("/message/"+s.message._id);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users",{method:"get"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,O(n.message);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){x()}),[]),Object(f.jsx)("div",{className:"searchResultComponent",children:t?Object(f.jsx)("div",{className:"searchUsers",children:(null===m||void 0===m?void 0:m.filter((function(e){return e._id!==c._id&&e.username.toLowerCase().includes(null===t||void 0===t?void 0:t.trim().toLowerCase())})).length)?null===m||void 0===m?void 0:m.filter((function(e){return e._id!==c._id&&e.username.toLowerCase().includes(null===t||void 0===t?void 0:t.trim().toLowerCase())})).map((function(e,t){return Object(f.jsxs)("div",{onClick:function(){return h(e)},className:"searchUser",children:[Object(f.jsx)("img",{className:"userProfile",src:(null===e||void 0===e?void 0:e.profilePicture)||"../images/noAvatar.png",alt:""}),Object(f.jsx)("span",{className:"userName",children:e.username})]},t+100)})):Object(f.jsx)("div",{className:"noUserFound",children:"No User is Found"})}):null})}),C=n(496),w=(n(267),n(495)),k=(n(268),function(e){var t=e.props,n=t.deletePopup,a=t.setDeletePopup,s=t.deleteUser;return Object(f.jsx)("div",{className:n?"deletePopup active":"deletePopup",children:Object(f.jsxs)("div",{className:"showPopup",children:[Object(f.jsxs)("div",{className:"icon-text",children:[Object(f.jsx)(w.a,{className:"warningIcon"}),Object(f.jsx)("h1",{children:"Want to Delete Your Account?"})]}),Object(f.jsxs)("div",{className:"button",children:[Object(f.jsx)(C.a,{onClick:function(){return a(!1)},variant:"outlined",color:"secondary",children:"Cancel"}),Object(f.jsx)(C.a,{onClick:function(){return s()},variant:"contained",color:"secondary",children:"Delete"})]})]})})}),S=(n(269),function(e){var t=e.props,n=t.imagePopup,a=t.setImagePopup,c=(t.deleteUser,Object(u.c)((function(e){return e.AuthReducer}))),r=(c.user,c.newUserData),i=(Object(u.b)(),Object(s.useState)("")),o=Object(b.a)(i,2),l=o[0],d=o[1],m=function(){var e=Object(p.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("image",l),e.next=4,fetch("/api/user/profilpicture",{method:"PATCH",heades:{"Content-Type":"application/json"},body:t});case 4:return n=e.sent,e.next=7,n.json();case 7:e.sent,200===n.status&&setTimeout((function(){a(!1)}),1e3);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:n?"imagePopup active":"imagePopup",children:Object(f.jsxs)("div",{className:"showPopup",children:[Object(f.jsxs)("div",{className:"icon-text",children:[Object(f.jsx)("label",{className:"profileImage",htmlFor:"profileImage",children:Object(f.jsx)("div",{className:"image",children:Object(f.jsx)("img",{src:l?URL.createObjectURL(l):null===r||void 0===r?void 0:r.profilePicture,alt:""})})}),Object(f.jsx)("input",{onChange:function(e){d(e.target.files[0])},accept:".png,.jpeg,.jpg",type:"file",id:"profileImage",style:{display:"none"}}),Object(f.jsx)("h1",{children:"Change Your Profile Picture"})]}),Object(f.jsxs)("div",{className:"button",children:[Object(f.jsx)(C.a,{onClick:function(){a(!1),d("")},variant:"outlined",color:"secondary",children:"Cancel"}),Object(f.jsx)(C.a,{onClick:function(){return m()},variant:"contained",color:"secondary",children:"Upload"})]})]})})}),T=function(e){var t,n=e.props,a=Object(u.c)((function(e){return e.AuthReducer})),c=a.user,r=(a.newUserData,Object(u.b)()),i=Object(s.useState)(),o=Object(b.a)(i,2),l=o[0],d=o[1],m=Object(s.useState)(!1),O=Object(b.a)(m,2),h=O[0],x=O[1],v=Object(s.useState)(!1),g=Object(b.a)(v,2),y=g[0],N=g[1],w=Object(s.useState)(!1),T=Object(b.a)(w,2),I=T[0],_=T[1],U=function(){var e=Object(p.a)(j.a.mark((function e(){var t,a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/deleteaccount",{method:"DELETE",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.sent,e.next=8,fetch("/api/delete/conversation",{method:"DELETE",headers:{"Content-Type":"application/json"}});case 8:return a=e.sent,e.next=11,a.json();case 11:s=e.sent,console.log(a),console.log(s),n.logoutHandle();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/"+c._id,{method:"get"});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,d(n.message),r({type:"PROFILE_CHANGED",payload:n.message});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){L()}),[I]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(C.a,{onClick:function(){return x(!h)},className:"profile",children:[Object(f.jsx)("img",{src:(null===l||void 0===l?void 0:l.profilePicture)||"../images/noAvatar.png",alt:"",className:"profileImage"}),Object(f.jsx)("sapn",{className:"profileName",children:null===(t=c.username)||void 0===t?void 0:t.split(" ")[0]})]}),Object(f.jsxs)("div",{className:h?"profilePopup active":"profilePopup",children:[Object(f.jsx)(C.a,{className:"changeImage",onClick:function(){return _(!0)},children:Object(f.jsx)("div",{onClick:function(){return x(!h)},children:"Change Image"})}),Object(f.jsx)(C.a,{onClick:function(){x(!h),N(!0)},className:"changeImage",children:"Delete Account"}),Object(f.jsx)(C.a,{onClick:function(){x(!h),n.logoutHandle()},className:"logoutButton",children:"LOGOUT"})]}),Object(f.jsx)(k,{props:{deletePopup:y,setDeletePopup:N,deleteUser:U}}),Object(f.jsx)(S,{props:{imagePopup:I,setImagePopup:_,deleteUser:U}})]})},I=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.AuthReducer})),n=(t.user,t.userProfile,Object(s.useState)()),a=Object(b.a)(n,2),c=a[0],r=a[1],i=Object(s.useState)(!1),d=Object(b.a)(i,2),j=d[0],p=d[1],m=Object(l.g)().pathname;return Object(s.useEffect)((function(){r("")}),[m]),Object(f.jsx)("header",{children:Object(f.jsxs)("nav",{children:[Object(f.jsxs)("div",{className:"headerLeft",children:[Object(f.jsx)(g.a,{onClick:function(){p(!0),r()},className:"searchIconFormMobile"}),Object(f.jsx)(o.b,{to:"/",children:Object(f.jsx)("img",{src:"../images/logo.png",alt:""})})]}),Object(f.jsx)("div",{className:j?"headerMiddle active":"headerMiddle",children:Object(f.jsxs)("div",{className:"searchBar",children:[Object(f.jsx)(y.a,{onClick:function(){return p(!1)},className:"searchCancelMobile"}),Object(f.jsx)("input",{onChange:function(e){return r(e.target.value)},value:c,placeholder:"Search A User",className:"searchInput",type:"text"}),Object(f.jsx)(N,{searchInput:c,setSearchInput:r})]})}),Object(f.jsx)("div",{className:"headerRight",children:Object(f.jsx)(T,{props:{logoutHandle:function(){e({type:"LOGOUT"})}}})})]})})},_=n(241),U=n(18),L=n(500),E=n(225),P=n.n(E),R=(n(271),n(240)),D=function(e){var t=e.message,n=e.own,a=e.currentChatUser,s=Object(u.c)((function(e){return e.AuthReducer})).newUserData;return Object(f.jsx)(R.a,{children:Object(f.jsxs)("div",{className:"message ".concat(n),children:[Object(f.jsxs)("div",{className:"messageTop",children:[n?Object(f.jsx)("img",{className:"messageImg",src:(null===s||void 0===s?void 0:s.profilePicture)||"../images/noAvatar.png",alt:""}):Object(f.jsx)("img",{className:"messageImg",src:a||"../images/noAvatar.png",alt:""}),Object(f.jsx)("p",{className:"messageText",children:null===t||void 0===t?void 0:t.text})]}),Object(f.jsx)("div",{className:"messageBottom",children:P()(null===t||void 0===t?void 0:t.createdAt).fromNow()})]})})},A=(n(426),n(499)),B=function(){var e=Object(l.h)().id,t=Object(u.c)((function(e){return e.AuthReducer})),n=t.user,a=t.conversationUser,c=Object(u.b)(),r=Object(s.useState)(),i=Object(b.a)(r,2),d=i[0],O=i[1],h=function(){var t=Object(p.a)(j.a.mark((function t(){var s,r,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/user/".concat(null===(s=a.find((function(t){return t._id===e})))||void 0===s?void 0:s.members.find((function(e){return e!==n._id}))),{method:"get"});case 2:return r=t.sent,t.next=5,r.json();case 5:i=t.sent,200===r.status?(O(i.message),c({type:"CURRENT_CHAT_USER",payload:i.message})):c({type:"CURRENT_CHAT_USER",payload:null});case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(s.useEffect)((function(){h()}),[e]),Object(f.jsx)("div",{className:"profile",children:d?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(o.b,{to:"/",children:Object(f.jsx)(A.a,{className:"backMobileButton"})}),Object(f.jsx)("img",{className:"profileImage",src:null===d||void 0===d?void 0:d.profilePicture,alt:""}),Object(f.jsx)("div",{className:"profileName",children:null===d||void 0===d?void 0:d.username})]}):Object(f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(f.jsx)(m.a,{variant:"circle",width:50,height:50,style:{background:"rgb(0 0 0 / 20%)"}}),Object(f.jsx)(m.a,{variant:"text",width:100,height:30,style:{background:"rgb(0 0 0 / 20%)",marginLeft:"20px"}})]})})},F=n(238),M=n.n(F),H=function(e){var t=e.currentConversation,n=Object(u.c)((function(e){return e.AuthReducer})),c=n.user,r=n.conversationUser,i=n.scrollBottom,o=n.currentChatUser,d=Object(u.b)(),m=Object(l.h)(),O=Object(s.useState)([]),h=Object(b.a)(O,2),x=h[0],v=h[1],g=Object(s.useState)(),y=Object(b.a)(g,2),N=y[0],C=y[1],w=Object(s.useState)([]),k=Object(b.a)(w,2),S=(k[0],k[1],function(){var e=Object(p.a)(j.a.mark((function e(){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/message/".concat(t),{method:"get"});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,v(a.message),200===n.status&&setTimeout((function(){d({type:"SCROLL_BOTTOM"})}),500);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());Object(s.useEffect)((function(){S(),(a=M()("https://shajib-chat.herokuapp.com/")).emit("join",{userId:c._id,conversationId:t,allConversation:r}),a.on("getUsers",(function(e){}))}),[i,t]);var T=function(){var e=Object(p.a)(j.a.mark((function e(n){var s,r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(null===N||void 0===N?void 0:N.trim())){e.next=13;break}return s={senderId:c._id,text:N,conversationId:t},a.emit("sendMessage",Object(U.a)(Object(U.a)({},s),{},{receiverId:o._id})),e.next=6,fetch("/api/newMessage",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 6:return r=e.sent,e.next=9,r.json();case 9:i=e.sent,v([].concat(Object(_.a)(x),[i.message])),setTimeout((function(){d({type:"SCROLL_BOTTOM",payload:Math.random()})}),100),C("");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){a.on("getMessage",(function(e){d({type:"SCROLL_BOTTOM",payload:Math.random()})}))}),[i]);var I=Object(s.useRef)();return Object(s.useEffect)((function(){var e;null===(e=I.current)||void 0===e||e.scrollIntoView({behavior:"auto"})}),[x,i]),Object(f.jsx)("section",{className:m.id?"RightContainer mobileActive":"RightContainer",children:t?(null===r||void 0===r?void 0:r.some((function(e){return e._id===t})))?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"rightTopBar",children:Object(f.jsx)(B,{})}),Object(f.jsx)("div",{className:"rightMiddle",children:Object(f.jsx)("div",{className:"messages",children:Object(f.jsx)("div",{className:"message",children:x?x.length?x.map((function(e,t){return Object(f.jsx)("div",{ref:I,children:Object(f.jsx)(D,{currentChatUser:null===o||void 0===o?void 0:o.profilePicture,message:e,own:(null===e||void 0===e?void 0:e.senderId)===c._id?"own":""},t)})})):Object(f.jsx)("h1",{style:{alignSelf:"center",top:"50%",position:"absolute"},children:"No message\ud83d\ude2a"}):Object(f.jsx)("h1",{style:{alignSelf:"center",top:"50%",position:"absolute"},children:"Loading..."})})})}),Object(f.jsx)("div",{className:"rightBottom",children:Object(f.jsxs)("form",{onSubmit:T,className:"messageForm",children:[Object(f.jsx)("input",{value:N,onChange:function(e){return C(e.target.value)},placeholder:"Type Message...",type:"text",className:"messageInput"}),Object(f.jsx)("button",{className:"submitButton",type:"submit",children:Object(f.jsx)(L.a,{})})]})})]}):Object(f.jsx)("h1",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:"Nothis is found\ud83e\udd37\u200d\u2642\ufe0f\ud83e\udd26\u200d\u2642\ufe0f..."}):Object(f.jsx)("h1",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:"Select Your Friend To Chat\ud83d\udcac\ud83d\udc4f"})})},G=function(){var e=Object(l.h)().id;return Object(f.jsxs)("div",{children:[Object(f.jsx)(I,{}),Object(f.jsxs)("section",{className:"mainMessage",children:[Object(f.jsx)(v,{currentConversation:e}),e?Object(f.jsx)(H,{currentConversation:e}):Object(f.jsx)(H,{})]})]})},J=n(53),V=(n(457),n(113)),z=n.n(V),W=n(505),X=n(507),Y=n(506),q=n(502),K=n(503),Q=n(504),Z=(n(458),n(501)),$=n(76),ee=function(e){var t=e.setHandlePopup,n=e.handlePopup,a=Object(u.b)(),c=Object(s.useState)(!0),r=Object(b.a)(c,2),i=r[0],o=r[1],l=Object(s.useState)({username:"",email:"",password:"",cpassword:""}),d=Object(b.a)(l,2),m=d[0],O=d[1],h=function(e){O(Object(U.a)(Object(U.a)({},m),{},Object(J.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(p.a)(j.a.mark((function e(t){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.name&&t.email&&t.id)){e.next=8;break}return e.next=3,fetch("/api/registration",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.name,email:t.email,password:t.id,cpassword:t.id,profilePicture:t.picture.data.url})});case 3:return n=e.sent,e.next=6,n.json();case 6:s=e.sent,400===n.status?$.b.error(s.error.username||s.error.email||s.error.password||s.error.cpassword||s.error,{style:{padding:"10px",color:"#fff",fontSize:"16px",background:"red"},iconTheme:{primary:"white",secondary:"red"}}):($.b.success(s.message,{style:{padding:"10px",color:"#fff",fontSize:"16px",background:"#62D346"},iconTheme:{primary:"white",secondary:"#62D346"}}),a({type:"LOGIN",payload:s.token}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(j.a.mark((function e(t){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/registration",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});case 3:return n=e.sent,e.next=6,n.json();case 6:s=e.sent,400===n.status?$.b.error(s.error.username||s.error.email||s.error.password||s.error.cpassword||s.error,{style:{padding:"10px",color:"#fff",fontSize:"16px",background:"red"},iconTheme:{primary:"white",secondary:"red"}}):($.b.success(s.message,{style:{padding:"10px",color:"#fff",fontSize:"16px",background:"#62D346"},iconTheme:{primary:"white",secondary:"#62D346"}}),a({type:"LOGIN",payload:s.token}),O({username:"",email:"",password:"",cpassword:""}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:n?"signupContainer":"hide signupContainer",children:[Object(f.jsx)($.a,{position:"top-center",reverseOrder:!1}),Object(f.jsxs)("div",{className:"signupBox",children:[Object(f.jsx)(Z.a,{className:"hideSignup",onClick:function(){return t(!1)}}),Object(f.jsx)("h4",{className:"signupTitle",children:"Sign Up"}),Object(f.jsx)("p",{className:"signupDesc",children:"It's quick and easy"}),Object(f.jsx)("hr",{}),Object(f.jsxs)("form",{onSubmit:v,autoComplete:"off",className:"signupForm",children:[Object(f.jsx)(W.a,{className:"fields",id:"outlined-basic",label:"Full Name",type:"text",autoComplete:"off",variant:"outlined",name:"username",value:m.username,onChange:h}),Object(f.jsx)(W.a,{className:"fields",id:"outlined-basic",label:"Email",type:"email",autoComplete:"off",variant:"outlined",name:"email",value:m.email,onChange:h}),Object(f.jsxs)("div",{className:"fields",children:[Object(f.jsx)(W.a,{id:"outlined-password-input",label:"Password",type:i?"text":"password",autoComplete:"off",variant:"outlined",name:"password",value:m.password,onChange:h}),Object(f.jsx)(X.a,{onClick:function(){return o(!i)},control:Object(f.jsx)(Y.a,{icon:Object(f.jsx)(q.a,{}),checkedIcon:Object(f.jsx)(K.a,{})})})]}),Object(f.jsx)("div",{className:"fields",children:Object(f.jsx)(W.a,{id:"outlined-password-input",label:"Confirm Password",type:i?"text":"password",autoComplete:"off",variant:"outlined",name:"cpassword",value:m.cpassword,onChange:h})}),Object(f.jsx)("input",{className:"signupButton",type:"submit",value:"Sign Up"})]}),Object(f.jsxs)("div",{className:"alternateLogin",children:[Object(f.jsx)("div",{className:"signupWth",children:"Or"}),Object(f.jsx)(C.a,{className:"facebookButton",variant:"contained",color:"primary",children:Object(f.jsx)(z.a,{appId:"240379330783555",autoLoad:!1,fields:"name,email,picture",callback:x,icon:Object(f.jsx)(Q.a,{className:"facebookIcon"}),textButton:"Sign up with Facebook"})})]})]})]})},te=n(75),ne=(n(459),function(){var e=Object(u.b)(),t=Object(s.useState)(!1),n=Object(b.a)(t,2),a=n[0],c=n[1],r=Object(s.useState)(!1),i=Object(b.a)(r,2),o=i[0],l=i[1],d=Object(s.useState)({email:"",password:""}),m=Object(b.a)(d,2),O=m[0],h=m[1],x=function(e){h(Object(U.a)(Object(U.a)({},O),{},Object(J.a)({},e.target.name,e.target.value)))},v=function(){var t=Object(p.a)(j.a.mark((function t(n){var a,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.email||!n.id){t.next=8;break}return t.next=3,fetch("/api/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n.email,password:n.id})});case 3:return a=t.sent,t.next=6,a.json();case 6:s=t.sent,400===a.status?te.b.error(s.error.email||s.error.password||s.error,{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):(te.b.success(s.message,{position:"top-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e({type:"LOGIN",payload:s.token}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(p.a)(j.a.mark((function t(n){var a,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,fetch("/api/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});case 3:return a=t.sent,t.next=6,a.json();case 6:s=t.sent,400===a.status?te.b.error(s.error.email||s.error.password||s.error,{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):(te.b.success(s.message,{position:"top-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),h({email:"",password:""}),e({type:"LOGIN",payload:s.token}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)("section",{className:"loginContainer",children:[Object(f.jsx)(te.a,{}),Object(f.jsxs)("div",{className:"loginWrapper",children:[Object(f.jsxs)("div",{className:"loginLeft",children:[Object(f.jsx)("div",{className:"loginLeftTitle",children:"Chat-Box"}),Object(f.jsx)("div",{className:"loginLeftDesc",children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Illo magnam eum, atque sequi animi molestiae!"})]}),Object(f.jsx)("div",{className:"loginRight",children:Object(f.jsxs)("div",{className:"loginBox",children:[Object(f.jsxs)("form",{onSubmit:g,className:"loginForm",noValidate:!0,autoComplete:"off",children:[Object(f.jsx)(W.a,{onChange:x,value:O.email,name:"email",id:"outlined-basic",type:"email",label:"Email",variant:"outlined"}),Object(f.jsxs)("div",{className:"fields",children:[Object(f.jsx)(W.a,{onChange:x,value:O.password,name:"password",id:"outlined-basic",label:"Password",variant:"outlined",type:o?"text":"password"}),Object(f.jsx)(X.a,{onClick:function(){return l(!o)},control:Object(f.jsx)(Y.a,{icon:Object(f.jsx)(q.a,{}),checkedIcon:Object(f.jsx)(K.a,{})})})]}),Object(f.jsx)(C.a,{className:"loginButton",type:"submit",variant:"contained",color:"primary",children:"Login"})]}),Object(f.jsx)("div",{className:"loginWith",children:"or "}),Object(f.jsx)("div",{className:"alternateLogin",children:Object(f.jsx)(C.a,{className:"facebookButton",variant:"contained",color:"primary",children:Object(f.jsx)(z.a,{appId:"240379330783555",autoLoad:!1,fields:"id,email,picture",callback:v,icon:Object(f.jsx)(Q.a,{className:"facebookIcon"})})})}),Object(f.jsx)("div",{className:"dontAccount",children:"Don't have any accont?"}),Object(f.jsx)(C.a,{onClick:function(){return c(!0)},className:"RegisterButton",type:"submit",variant:"contained",children:"Create New Account"})]})})]}),Object(f.jsx)(ee,{handlePopup:a,setHandlePopup:c})]})}),ae=function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"404! Not found page..."}),Object(f.jsx)(o.b,{to:"/",children:"Back To Home"})]})};var se=function(){var e=Object(u.c)((function(e){return e.AuthReducer})).user;return Object(f.jsx)(o.a,{children:Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)(l.c,{children:[Object(f.jsx)(l.a,{path:"/",exact:!0,children:e?Object(f.jsx)(G,{}):Object(f.jsx)(ne,{})}),Object(f.jsx)(l.a,{path:"/message/:id",exact:!0,children:e?Object(f.jsx)(G,{}):Object(f.jsx)(ne,{})}),Object(f.jsx)(l.a,{exact:!0,component:ae})]})})})},ce=n(155),re=n(239),ie={loading:!1,user:"",token:"",conversationUser:[],currentChatUser:null,newUserData:"",scrollBottom:Math.random()},oe=function(e){var t=Object(re.a)(e),n=new Date(1e3*t.exp);if(!(new Date>n))return localStorage.setItem("myTokenChat",e),t;localStorage.removeItem("myTokenChat")},le=localStorage.getItem("myTokenChat");if(le){var ue=oe(le);ie.token=le,ue&&(ie.user=ue)}else ie.user="";var de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;return"LOGIN"===t.type?Object(U.a)(Object(U.a)({},e),{},{user:oe(t.payload),newUserData:oe(t.payload),token:t.payload}):"LOGOUT"===t.type?(localStorage.removeItem("myTokenChat"),Object(U.a)(Object(U.a)({},e),{},{user:"",token:""})):"ADD_CONVERSATIONS_USER"===t.type?Object(U.a)(Object(U.a)({},e),{},{conversationUser:t.payload}):"SCROLL_BOTTOM"===t.type?Object(U.a)(Object(U.a)({},e),{},{scrollBottom:parseFloat(t.payload)}):"CURRENT_CHAT_USER"===t.type?Object(U.a)(Object(U.a)({},e),{},{currentChatUser:t.payload}):"PROFILE_CHANGED"===t.type?Object(U.a)(Object(U.a)({},e),{},{newUserData:t.payload}):e},je=Object(ce.a)({AuthReducer:de}),pe=Object(ce.b)(je,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(u.a,{store:pe,children:Object(f.jsx)(se,{})})}),document.getElementById("root"))}},[[460,1,2]]]);
//# sourceMappingURL=main.513b16d3.chunk.js.map